<odoo>
  <!-- TREE VIEW -->
  <record id="view_wip_tree" model="ir.ui.view">
    <field name="name">process.wip.tree.view</field>
    <field name="model">process.wip</field>
    <field name="arch" type="xml">
      <!-- <tree string="WIP" default_order="created_date desc" create="false"> -->
      <tree string="WIP" create="false">
        <field name="id" />
        <field name="sale_order_id" />
        <field name="customer" />
        <field name="created_date" />
        <field name="total" />
        <field name="invoice_id" string="Invoice ID"/>
        <field name="delivery_id" string="Delivery Note"/> 
        <field name="status" 
          widget="badge" 
          decoration-danger="status == 'order_received'"
          decoration-info="status == 'kitting'"
          decoration-muted="status == 'checking'"
          decoration-primary="status == 'packing'"
          decoration-warning="status == 'booking'"
          decoration-success="status == 'pick_up_by_courier' or status == 'done'"
          optional="show"
        />
        <field name="flash_express_status" widget="badge" 
              decoration-muted="flash_express_status == 'pending' or flash_express_status == 'detained'"
              decoration-info="flash_express_status == 'courier_pickup_requested' or flash_express_status == 'in_transit'"
              decoration-danger="flash_express_status == 'problem_shipment_being_processed' or flash_express_status == 'cancelled' or flash_express_status == 'close_by_exception'"
              decoration-primary="flash_express_status == 'delivery_order_created' or flash_express_status == 'picked_up' or flash_express_status == 'pick_up_by_courier' or flash_express_status == 'delivering'"
              decoration-warning="flash_express_status == 'returned_shipment'"
              decoration-success="flash_express_status == 'signed'"
            />
      </tree>
    </field>
  </record>

  <!-- FORM VIEW -->
  <record id="view_wip_form" model="ir.ui.view">
    <field name="name">process.wip.form.view</field>
    <field name="model">process.wip</field>
    <field name="arch" type="xml">
      <form string="WIP">
        <sheet>
          <group>
            <field name="id" readonly="1"/>
            <field name="sale_order_id" 
              widget="many2one"
              style="cursor: pointer;"
              readonly="1"
            />
            <field name="customer"/>
            <field name="created_date"/>
            <field name="total"/>
            <field name="invoice_id"/>
            <field name="delivery_id" string="Delivery Note"/>
            <field name="status" style="border-bottom: 0.5px solid black;"/>
            <field name="flash_express_status" widget="badge" 
              decoration-muted="flash_express_status == 'pending' or flash_express_status == 'detained'"
              decoration-info="flash_express_status == 'courier_pickup_requested' or flash_express_status == 'in_transit'"
              decoration-danger="flash_express_status == 'problem_shipment_being_processed' or flash_express_status == 'cancelled' or flash_express_status == 'close_by_exception'"
              decoration-primary="flash_express_status == 'delivery_order_created' or flash_express_status == 'picked_up' or flash_express_status == 'pick_up_by_courier' or flash_express_status == 'delivering'"
              decoration-warning="flash_express_status == 'returned_shipment'"
              decoration-success="flash_express_status == 'signed'"
            />
          </group>

          <notebook>
            <page string="History Logs">
              <field name="wip_log_ids">
                <tree string="WIP Logs" create="false">
                  <field name="changed_at"/>
                  <field name="previous_status"/>
                  <field name="current_status"/>
                  <field name="changed_by"/>
                </tree>
              </field>
            </page>
            <page string="Test">
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>

  <!-- ACTION TO LINK BOTH VIEWS -->
  <record id="action_process_wip" model="ir.actions.act_window">
    <field name="name">WIP</field>
    <field name="res_model">process.wip</field>
    <field name="view_mode">tree,form</field>
    <field name="view_id" ref="view_wip_tree"/>
  </record>

</odoo>
